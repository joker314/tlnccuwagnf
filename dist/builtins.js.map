{"version":3,"sources":["builtins.js"],"names":[],"mappings":"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","file":"builtins.js","sourcesContent":["const fs = require('fs')\nconst path = require('path')\nconst run = require('./run')\nconst interp = require('./interp')\nconst lib = require('./lib')\nconst chalk = require('chalk')\nconst C = require('./constants')\n\nfunction exists(p) {\n  // warning, this is synchronous\n  try {\n    fs.accessSync(p, fs.F_OK)\n    return true\n  } catch (err) {\n    return false\n  }\n}\n\nexport function makeBuiltins(fsScope) {\n  let variables = {}\n\n  variables['print'] = new lib.Variable(new lib.LFunction(function(args) {\n    console.log(...args.map(arg => {\n      let a = arg.toString() || ''\n      if (a === '<Boolean true>') a = chalk.green('true') // true\n      else if (a === '<Boolean false>') a = chalk.red('false') // false\n      else if (a === '<Function>') a = chalk.magenta(`function`) // function\n      else if (a.substr(0, 8) === '<String ') a = `${a.substr(8, a.length-9)}` // string\n      else if (a.substr(0, 8) === '<Number ') {\n        if (Number(a.substr(8, a.length-9)) % 1 === 0) a = chalk.blue(`${a.substr(8, a.length-9)}`) // integer\n        else a = chalk.blue(`${a.substr(8, a.length-9)}`) // float\n      }\n      return a\n    }))\n  }))\n\n  variables['process'] = new lib.Variable(lib.toLObject({\n    exit: new lib.LFunction(function([code]) {\n      code = code || 0\n      process.exit(code)\n    })\n  }))\n\n  variables['print-debug'] = new lib.Variable(new lib.LFunction(function(args) {\n    console.log(...args)\n  }))\n\n  variables['concat'] = new lib.Variable(new lib.LFunction(function(args) {\n    return lib.toLString(args.map(lib.toJString).join(''))\n  }))\n\n  variables['if'] = new lib.Variable(new lib.LFunction(async function(args) {\n    if (lib.toJBoolean(args[0])) {\n      await lib.call(args[1], [])\n    } else {\n      // optional `else`\n      if (args[2]) lib.call(args[2], [])\n    }\n  }))\n\n  variables['ifel'] = new lib.Variable(new lib.LFunction(async function(args) {\n    if (lib.toJBoolean(args[0])) {\n      await lib.call(args[1], [])\n    } else {\n      await lib.call(args[2], [])\n    }\n  }))\n\n  variables['sleep'] = new lib.Variable(new lib.LFunction(function([time]) {\n    return new Promise(resolve => {\n      setTimeout(resolve, lib.toJNumber(time) * 1000)\n    })\n  }))\n\n  variables['sleep-sync'] = new lib.Variable(new lib.LFunction(function([time]) {\n    let e = new Date().getTime() + (lib.toJNumber(time) * 1000)\n    while (new Date().getTime() <= e) { /* empty */ }\n  }))\n\n  variables['obj'] = new lib.Variable(new lib.LFunction(function(args) {\n    return new lib.LObject()\n  }))\n\n  variables['array'] = new lib.Variable(new lib.LFunction(function(args) {\n    return new lib.LArray()\n  }))\n\n  variables['+'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) + lib.toJNumber(y))\n  }))\n  variables['add'] = variables['+']\n\n  variables['-'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) - lib.toJNumber(y))\n  }))\n  variables['minus'] = variables['-']\n\n  variables['/'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) / lib.toJNumber(y))\n  }))\n  variables['divide'] = variables['/']\n\n  variables['*'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) * lib.toJNumber(y))\n  }))\n  variables['multiply'] = variables['&']\n  \n  variables['^'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(Math.pow(lib.toJNumber(x), lib.toJNumber(y)))\n  }))\n\n  variables['not'] = new lib.Variable(new lib.LFunction(function([bool]) {\n    return lib.toLBoolean(!lib.toJBoolean(bool))\n  }))\n  variables['!'] = variables['not']\n\n  variables['and'] = new lib.Variable(new lib.LFunction(function([b1, b2]) {\n    return lib.toLBoolean(lib.toJBoolean(b1) && lib.toJBoolean(b2))\n  }))\n  variables['&'] = variables['and']\n\n  variables['or'] = new lib.Variable(new lib.LFunction(function([b1, b2]) {\n    return lib.toLBoolean(lib.toJBoolean(b1) || lib.toJBoolean(b2))\n  }))\n  variables['|'] = variables['or']\n\n  variables['lt'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) < lib.toJNumber(y))\n  }))\n  variables['<'] = variables['lt']\n\n  variables['gt'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) > lib.toJNumber(y))\n  }))\n  variables['>'] = variables['gt']\n\n  variables['eq'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) === lib.toJNumber(y))\n  }))\n  variables['='] = variables['eq']\n\n  variables['is'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(x.toString() === y.toString())\n  }))\n\n  variables['loop'] = new lib.Variable(new lib.LFunction(function([fn]) {\n    while (lib.toJBoolean(lib.call(fn, []))) { /* empty */ }\n  }))\n\n  variables['use'] = new lib.Variable(new lib.LFunction(function([pathStr]) {\n    let p = lib.toJString(pathStr)\n    let locationInBuiltins = `${fsScope}/${p}`\n\n    if (p.substr(0, 1) !== '.') {\n      locationInBuiltins = `${__dirname}/../global-modules/${p}`\n    }\n\n    let ext = path.parse(locationInBuiltins).ext\n\n    if (!ext) {\n      locationInBuiltins += '.tul'\n      ext = '.tul'\n\n      if (!exists(locationInBuiltins)) {\n        locationInBuiltins = `${locationInBuiltins.substr(0, locationInBuiltins.length - 3)}js`\n        ext = '.js'\n      }\n    }\n\n    if (exists(locationInBuiltins)) {\n      if (ext === '.js') {\n        let used = require(locationInBuiltins)(lib, fsScope)\n        //var usedObj = lib.toLObject(used);\n        return used\n      } else if (ext === '.tul') {\n        let program = fs.readFileSync(locationInBuiltins).toString()\n        let result = run.run(program)\n        if ('exports' in result.variables) {\n          return result.variables.exports.value\n        } else {\n          return new lib.LObject()\n        }\n      } else {\n        console.error(\n          chalk.cyan(`use(...)`)\n          +\n          ': '\n          +\n          chalk.red(`Invalid extension ${chalk.yellow(ext)}.`)\n        )\n        process.exit(1)\n      }\n    } else {\n      console.error(\n        chalk.cyan(`use(...)`)\n        +\n        ': '\n        +\n        chalk.red(`Could not find ${chalk.yellow(p)} ${chalk.white.dim('@ '+locationInBuiltins)}.`)\n      )\n      process.exit(1)\n    }\n  }))\n\n  variables['launch'] = new lib.Variable(new lib.LFunction(function([fn]) {\n    lib.call(fn) // normally you'd *await* lib.call, but here we aren't\n  }))\n\n  let variableObject = new lib.LObject()\n\n  lib.set(variableObject, 'make', new lib.LFunction(function([env, name, value]) {\n    let v = new lib.Variable(value)\n    env.vars[lib.toJString(name)] = v\n    return v\n  }))\n\n  lib.set(variableObject, 'change', new lib.LFunction(function([variable, newValue]) {\n    variable.value = newValue\n  }))\n\n  lib.set(variableObject, 'value', new lib.LFunction(function([variable]) {\n    return variable.value\n  }))\n\n  lib.set(variableObject, 'from', new lib.LFunction(function([env, name]) {\n    name = lib.toJString(name)\n    let variable = env.vars[name]\n    if (typeof variable === 'undefined') {\n      throw new Error(chalk.red(`Can't access variable ${chalk.cyan(name)} because it doesn't exist!`))\n    } else {\n      return variable\n    }\n  }))\n\n  lib.set(variableObject, 'exists', new lib.LFunction(function([env, name]) {\n    return lib.toLBoolean(env.vars.hasOwnProperty(lib.toJString(name)))\n  }))\n\n  variables['Variable'] = new lib.Variable(variableObject)\n\n  let environmentObject = new lib.LObject()\n\n  lib.set(environmentObject, 'break-to', new lib.LFunction(function([toEnv, fromEnv]) {\n    fromEnv.breakToEnvironment = toEnv\n  }))\n\n  lib.set(environmentObject, 'set-comment', new lib.LFunction(function([env, comment]) {\n    env.comment = lib.toJString(comment)\n  }))\n\n  variables['Environment'] = new lib.Variable(environmentObject)\n\n  variables['set-timeout'] = new lib.Variable(new lib.LFunction(function([fn, ms]) {\n    setTimeout(function() {\n      lib.call(fn, [])\n    }, lib.toJNumber(ms))\n  }))\n\n  Object.keys(variables).map(function(value, index) {\n    if(variables[value]) {\n      if(variables[value].value instanceof lib.LFunction) variables[value].value.builtin = true\n    }\n  })\n\n  return variables\n}\n"],"sourceRoot":"/source/"}